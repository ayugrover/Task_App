{"ast":null,"code":"var _jsxFileName = \"D:\\\\newspicker\\\\src\\\\react-advanced-news-ticker\\\\index.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Directions = Object.freeze({\n  UP: 1,\n  DOWN: 2\n});\nexport const TickerStates = Object.freeze({\n  Stopped: 0,\n  Running: 1,\n  Paused: 2\n});\n\nclass NewsTicker extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      speed: this.props.speed,\n      currState: 0,\n      paused: 0,\n      moving: 0,\n      moveInterval: null,\n      items: Array.isArray(this.props.children) && this.props.children || [this.props.children]\n    };\n    this.element = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    this.init();\n  }\n\n  componentWillUnmount() {\n    if (this.state.moveInterval) clearInterval(this.state.moveInterval);\n  }\n\n  init() {\n    console.log(\"2\");\n    this.element.current.style.height = `${this.props.rowHeight * this.props.maxRows}px`;\n    this.element.current.style.overflow = `hidden`;\n    this.checkSpeed();\n    if (this.props.autoStart) this.start();\n  }\n\n  start() {\n    if (this.state.currState) return;\n    this.setState((_, props) => ({\n      currState: 1,\n      items: Array.isArray(this.props.children) && this.props.children || [this.props.children]\n    }), () => {\n      this.resetInterval();\n      this.props.started();\n    });\n  }\n\n  stop() {\n    if (!this.state.currState) return;\n    clearInterval(this.state.moveInterval);\n    this.setState({\n      currState: 0\n    }, () => this.props.stopped());\n  }\n\n  resetInterval() {\n    if (!this.state.currState) return;\n    clearInterval(this.state.moveInterval);\n    this.setState({\n      moveInterval: setInterval(() => this.move(), this.props.duration)\n    });\n  }\n\n  move() {\n    //console.log(\"1\");\n    if (!this.state.paused) this.moveNext();\n  }\n\n  moveNext() {\n    if (this.props.direction === Directions.DOWN) this.moveDown();else this.moveUp();\n  }\n\n  movePrev() {\n    if (this.props.direction === Directions.DOWN) this.moveUp();else this.moveDown();\n  }\n\n  pause() {\n    if (!this.state.paused) this.setState({\n      paused: 1\n    }, () => this.props.paused());\n  }\n\n  unPause() {\n    if (this.state.paused) {\n      this.setState({\n        paused: 0\n      }, () => this.props.unPaused());\n    }\n  }\n\n  async _handleDownAnimation(newlist) {\n    const firsliEl = this.element.current.children[0];\n    const speed = this.props.speed;\n    await this.setState({\n      items: newlist\n    }); // Hide first li element at up\n\n    firsliEl.style.cssText = `margin: -${this.props.rowHeight}px 0 0 0`; // First element will go down in speed ms\n\n    setTimeout(() => {\n      firsliEl.style.cssText = `margin: 0;transition: margin ${speed}ms;`;\n    }, 0); // Wait for speed ms and add last element to beginning of the trst.\n\n    await new Promise(resolve => setTimeout(async () => {\n      newlist.pop();\n      await this.setState({\n        items: newlist\n      });\n      resolve();\n    }, speed));\n  }\n\n  async moveDown() {\n    if (this.state.moving) return;\n    await this.setState({\n      moving: 1\n    });\n    this.props.movingDown();\n    const itemsCopy = [...this.state.items];\n    itemsCopy.unshift(itemsCopy[itemsCopy.length - 1]);\n    await this._handleDownAnimation(itemsCopy);\n    await this.setState({\n      moving: 0\n    });\n    this.props.hasMoved();\n    console.log(\"2. \");\n  }\n\n  async _handleUpAnimation(newlist) {\n    const firsliEl = this.element.current.children[0];\n    await this.setState({\n      items: newlist\n    }); // First element will go up rowHeight px in speed ms\n\n    setTimeout(() => firsliEl.style.cssText = `margin: -${this.props.rowHeight}px 0 0 0; transition: all ${this.props.speed}ms;`, 0); // Wait for speed ms and send first element to end of the list.\n    // After that get first list element back to margin 0.\n\n    await new Promise(resolve => setTimeout(async () => {\n      newlist.shift();\n      await this.setState({\n        items: newlist\n      });\n      firsliEl.style.cssText = \"margin: 0\";\n      resolve();\n    }, this.props.speed));\n  }\n\n  async moveUp() {\n    if (this.state.moving) return;\n    await this.setState({\n      moving: 1\n    });\n    this.props.movingUp();\n    const itemsCopy = [...this.state.items];\n    itemsCopy.push(itemsCopy[0]);\n    await this._handleUpAnimation(itemsCopy);\n    await this.setState({\n      moving: 0\n    });\n    this.props.hasMoved();\n  }\n\n  getState() {\n    if (this.state.paused) return TickerStates.Paused;else return this.state.currState ? TickerStates.Running : TickerStates.Stopped;\n  }\n\n  checkSpeed() {\n    if (this.props.duration < this.state.speed + 25) this.setState((_, props) => ({\n      speed: props.duration - 25\n    }));\n  }\n\n  prevButtonClick() {\n    this.movePrev();\n    this.resetInterval();\n  }\n\n  nextButtonClick() {\n    this.moveNext();\n    this.resetInterval();\n  }\n\n  startButtonClick() {\n    this.start();\n  }\n\n  stopButtonClick() {\n    this.stop();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"tbody\", {\n      className: this.props.className,\n      id: this.props.id,\n      style: this.props.style,\n      ref: this.element,\n      onMouseEnter: () => {\n        this.props.pauseOnHover && this.state.currState && this.pause();\n      },\n      onMouseLeave: () => {\n        this.props.pauseOnHover && this.state.currState && this.unPause();\n      },\n      children: this.state.items && this.state.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: item\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 68\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nNewsTicker.propTypes = {\n  rowHeight: PropTypes.number,\n  maxRows: PropTypes.number,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  speed: PropTypes.number,\n  duration: PropTypes.number,\n  direction: PropTypes.oneOf([Directions.UP, Directions.DOWN]),\n  autoStart: PropTypes.bool,\n  pauseOnHover: PropTypes.bool,\n  className: PropTypes.string,\n  id: PropTypes.string,\n  style: PropTypes.object,\n  hasMoved: PropTypes.func,\n  movingUp: PropTypes.func,\n  movingDown: PropTypes.func,\n  started: PropTypes.func,\n  stopped: PropTypes.func,\n  paused: PropTypes.func,\n  unPaused: PropTypes.func\n};\nNewsTicker.defaultProps = {\n  rowHeight: 22,\n  children: [],\n  maxRows: 3,\n  speed: 400,\n  duration: 2500,\n  direction: Directions.UP,\n  autoStart: true,\n  pauseOnHover: true,\n  className: \"\",\n  style: {},\n  id: \"\",\n  hasMoved: function () {},\n  movingUp: function () {},\n  movingDown: function () {},\n  started: function () {},\n  stopped: function () {},\n  paused: function () {},\n  unPaused: function () {}\n};\nexport default NewsTicker;","map":{"version":3,"sources":["D:/newspicker/src/react-advanced-news-ticker/index.js"],"names":["React","Component","PropTypes","Directions","Object","freeze","UP","DOWN","TickerStates","Stopped","Running","Paused","NewsTicker","constructor","props","state","speed","currState","paused","moving","moveInterval","items","Array","isArray","children","element","createRef","componentDidMount","init","componentWillUnmount","clearInterval","console","log","current","style","height","rowHeight","maxRows","overflow","checkSpeed","autoStart","start","setState","_","resetInterval","started","stop","stopped","setInterval","move","duration","moveNext","direction","moveDown","moveUp","movePrev","pause","unPause","unPaused","_handleDownAnimation","newlist","firsliEl","cssText","setTimeout","Promise","resolve","pop","movingDown","itemsCopy","unshift","length","hasMoved","_handleUpAnimation","shift","movingUp","push","getState","prevButtonClick","nextButtonClick","startButtonClick","stopButtonClick","render","className","id","pauseOnHover","map","item","index","propTypes","number","oneOfType","arrayOf","node","isRequired","oneOf","bool","string","object","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nexport const Directions = Object.freeze({ UP: 1, DOWN: 2 });\nexport const TickerStates = Object.freeze({ Stopped: 0, Running: 1, Paused: 2 });\n\nclass NewsTicker extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      speed: this.props.speed,\n      currState: 0,\n      paused: 0,\n      moving: 0,\n      moveInterval: null,\n      items: (Array.isArray(this.props.children) && this.props.children) || [this.props.children],\n    };\n\n    this.element = React.createRef();\n  }\n  componentDidMount() {\n    this.init();\n  }\n  componentWillUnmount() {\n    if (this.state.moveInterval) clearInterval(this.state.moveInterval);\n  }\n\n  init() {\n    console.log(\"2\");\n    this.element.current.style.height = `${this.props.rowHeight * this.props.maxRows}px`;\n    this.element.current.style.overflow = `hidden`;\n    this.checkSpeed();\n\n    if (this.props.autoStart) this.start();\n  }\n\n  start() {\n    if (this.state.currState) return;\n\n    this.setState(\n      (_, props) => ({\n        currState: 1,\n        items: (Array.isArray(this.props.children) && this.props.children) || [this.props.children],\n      }),\n      () => {\n        this.resetInterval();\n        this.props.started();\n      }\n    );\n  }\n\n  stop() {\n    if (!this.state.currState) return;\n\n    clearInterval(this.state.moveInterval);\n    this.setState({ currState: 0 }, () => this.props.stopped());\n  }\n\n  resetInterval() {\n    if (!this.state.currState) return;\n    clearInterval(this.state.moveInterval);\n    this.setState({\n      moveInterval: setInterval(() => this.move(), this.props.duration),\n    });\n  }\n\n  move() {\n    //console.log(\"1\");\n    if (!this.state.paused) this.moveNext();\n  }\n\n  moveNext() {\n    if (this.props.direction === Directions.DOWN) this.moveDown();\n    else this.moveUp();\n  }\n\n  movePrev() {\n    if (this.props.direction === Directions.DOWN) this.moveUp();\n    else this.moveDown();\n  }\n\n  pause() {\n    if (!this.state.paused) this.setState({ paused: 1 }, () => this.props.paused());\n  }\n\n  unPause() {\n    if (this.state.paused) {\n      this.setState({ paused: 0 }, () => this.props.unPaused());\n    }\n  }\n\n  async _handleDownAnimation(newlist) {\n    const firsliEl = this.element.current.children[0];\n    const speed = this.props.speed;\n\n    await this.setState({ items: newlist });\n    // Hide first li element at up\n    firsliEl.style.cssText = `margin: -${this.props.rowHeight}px 0 0 0`;\n\n    // First element will go down in speed ms\n    setTimeout(() => {\n      firsliEl.style.cssText = `margin: 0;transition: margin ${speed}ms;`;\n    }, 0);\n\n    // Wait for speed ms and add last element to beginning of the trst.\n    await new Promise((resolve) =>\n      setTimeout(async () => {\n        newlist.pop();\n        await this.setState({ items: newlist });\n\n        resolve();\n      }, speed)\n    );\n  }\n\n  async moveDown() {\n    if (this.state.moving) return;\n\n    await this.setState({ moving: 1 });\n    this.props.movingDown();\n\n    const itemsCopy = [...this.state.items];\n    itemsCopy.unshift(itemsCopy[itemsCopy.length - 1]);\n\n    await this._handleDownAnimation(itemsCopy);\n\n    await this.setState({ moving: 0 });\n    this.props.hasMoved();\n\n    console.log(\"2. \");\n  }\n\n  async _handleUpAnimation(newlist) {\n    const firsliEl = this.element.current.children[0];\n    await this.setState({ items: newlist });\n\n    // First element will go up rowHeight px in speed ms\n    setTimeout(\n      () =>\n        (firsliEl.style.cssText = `margin: -${this.props.rowHeight}px 0 0 0; transition: all ${this.props.speed}ms;`),\n      0\n    );\n\n    // Wait for speed ms and send first element to end of the list.\n    // After that get first list element back to margin 0.\n    await new Promise((resolve) =>\n      setTimeout(async () => {\n        newlist.shift();\n        await this.setState({ items: newlist });\n        firsliEl.style.cssText = \"margin: 0\";\n        resolve();\n      }, this.props.speed)\n    );\n  }\n\n  async moveUp() {\n    if (this.state.moving) return;\n\n    await this.setState({ moving: 1 });\n    this.props.movingUp();\n\n    const itemsCopy = [...this.state.items];\n    itemsCopy.push(itemsCopy[0]);\n\n    await this._handleUpAnimation(itemsCopy);\n\n    await this.setState({ moving: 0 });\n    this.props.hasMoved();\n  }\n\n  getState() {\n    if (this.state.paused) return TickerStates.Paused;\n    else return this.state.currState ? TickerStates.Running : TickerStates.Stopped;\n  }\n\n  checkSpeed() {\n    if (this.props.duration < this.state.speed + 25) this.setState((_, props) => ({ speed: props.duration - 25 }));\n  }\n\n  prevButtonClick() {\n    this.movePrev();\n    this.resetInterval();\n  }\n\n  nextButtonClick() {\n    this.moveNext();\n    this.resetInterval();\n  }\n\n  startButtonClick() {\n    this.start();\n  }\n\n  stopButtonClick() {\n    this.stop();\n  }\n\n  render() {\n    return (\n      <tbody\n        className={this.props.className}\n        id={this.props.id}\n        style={this.props.style}\n        ref={this.element}\n        onMouseEnter={() => {\n          this.props.pauseOnHover && this.state.currState && this.pause();\n        }}\n        onMouseLeave={() => {\n          this.props.pauseOnHover && this.state.currState && this.unPause();\n        }}>\n        {this.state.items && this.state.items.map((item, index) => <tr key={index}>{item}</tr>)}\n      </tbody>\n    );\n  }\n}\n\nNewsTicker.propTypes = {\n  rowHeight: PropTypes.number,\n  maxRows: PropTypes.number,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  speed: PropTypes.number,\n  duration: PropTypes.number,\n  direction: PropTypes.oneOf([Directions.UP, Directions.DOWN]),\n  autoStart: PropTypes.bool,\n  pauseOnHover: PropTypes.bool,\n  className: PropTypes.string,\n  id: PropTypes.string,\n  style: PropTypes.object,\n  hasMoved: PropTypes.func,\n  movingUp: PropTypes.func,\n  movingDown: PropTypes.func,\n  started: PropTypes.func,\n  stopped: PropTypes.func,\n  paused: PropTypes.func,\n  unPaused: PropTypes.func,\n};\nNewsTicker.defaultProps = {\n  rowHeight: 22,\n  children: [],\n  maxRows: 3,\n  speed: 400,\n  duration: 2500,\n  direction: Directions.UP,\n  autoStart: true,\n  pauseOnHover: true,\n  className: \"\",\n  style: {},\n  id: \"\",\n  hasMoved: function () {},\n  movingUp: function () {},\n  movingDown: function () {},\n  started: function () {},\n  stopped: function () {},\n  paused: function () {},\n  unPaused: function () {},\n};\nexport default NewsTicker;\n"]},"metadata":{},"sourceType":"module"}